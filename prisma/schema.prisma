generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Fit {
  id                      Int                       @id @default(autoincrement())
  code_mold               String
  mold                    String
  product_code            String
  product_description     String
  client                  String
  process                 String
  date                    DateTime                  @default(now())
  Attention_point_control Attention_point_control[]
  Homologation            Homologation[]
  Workstation             Workstation[]
}

model Attention_point_control {
  id                   Int    @id @default(autoincrement())
  requirements         String
  specifications       String
  evaluation_technique String
  control_method       String
  sample               String
  reaction_plan        String
  ce                   String?
  fitId                Int
  fit                  Fit     @relation(fields: [fitId], references: [id], onDelete: Cascade)

  @@index([fitId], map: "Attention_point_control_fitId_fkey")
}

model Workstation {
  id                            Int                             @id @default(autoincrement())
  workstation_name              String
  img_layout_path               String
  createdAt                     DateTime                        @default(now())
  updatedAt                     DateTime                        @updatedAt
  fitId                         Int
  devices                       Devices[]                       @relation("Devices")
  Image_final_product           Image_final_product[]
  Image_operation               Image_operation[]
  Image_package_description     Image_package_description[]
  materials                     Materials[]                     @relation("Materials")
  safety                        Safety[]                        @relation("Safety")
  specifics_requirements_client Specifics_requirements_client[] @relation("Specifics_requirements_client")
  used_tools                    Used_tools[]                    @relation("Used_tools")
  fit                           Fit                             @relation(fields: [fitId], references: [id], onDelete: Cascade)

  @@index([fitId], map: "Workstation_fitId_fkey")
}

model Specifics_requirements_client {
  id            Int         @id @default(autoincrement())
  description   String
  workstationId Int
  workstation   Workstation @relation("Specifics_requirements_client", fields: [workstationId], references: [id], onDelete: Cascade)

  @@index([workstationId], map: "Specifics_requirements_client_workstationId_fkey")
}

model Safety {
  id             Int         @id @default(autoincrement())
  helmet         Boolean     @default(false)
  earplug        Boolean     @default(false)
  safety_goggles Boolean     @default(false)
  safety_gloves  Boolean     @default(false)
  safety_mask    Boolean     @default(false)
  safety_boot    Boolean     @default(false)
  outros         String
  workstationId  Int
  workstation    Workstation @relation("Safety", fields: [workstationId], references: [id], onDelete: Cascade)

  @@index([workstationId], map: "Safety_workstationId_fkey")
}

model Used_tools {
  id              Int         @id @default(autoincrement())
  pliers          Boolean     @default(false)
  box_cutter      Boolean     @default(false)
  screen_printing Boolean     @default(false)
  outros          String
  workstationId   Int
  workstation     Workstation @relation("Used_tools", fields: [workstationId], references: [id], onDelete: Cascade)

  @@index([workstationId], map: "Used_tools_workstationId_fkey")
}

model Image_operation {
  id            Int         @id @default(autoincrement())
  img_path      String
  description   String
  workstationId Int
  workstation   Workstation @relation(fields: [workstationId], references: [id], onDelete: Cascade)

  @@index([workstationId], map: "Image_operation_workstationId_fkey")
}

model Image_final_product {
  id            Int         @id @default(autoincrement())
  img_path      String
  description   String
  workstationId Int
  workstation   Workstation @relation(fields: [workstationId], references: [id], onDelete: Cascade)

  @@index([workstationId], map: "Image_final_product_workstationId_fkey")
}

model Image_package_description {
  id            Int         @id @default(autoincrement())
  img_path      String
  description   String
  workstationId Int
  workstation   Workstation @relation(fields: [workstationId], references: [id], onDelete: Cascade)

  @@index([workstationId], map: "Image_package_description_workstationId_fkey")
}

model Materials {
  id            Int         @id @default(autoincrement())
  sap_code      String
  description   String
  quantity      String      @default("") @db.VarChar(50)
  workstationId Int
  workstation   Workstation @relation("Materials", fields: [workstationId], references: [id], onDelete: Cascade)

  @@index([workstationId], map: "Materials_workstationId_fkey")
}

model Devices {
  id            Int         @id @default(autoincrement())
  description   String
  code          String
  quantity      Int
  workstationId Int
  workstation   Workstation @relation("Devices", fields: [workstationId], references: [id], onDelete: Cascade)

  @@index([workstationId], map: "Devices_workstationId_fkey")
}

model Homologation {
  id                Int    @id @default(autoincrement())
  user_created      Json
  user_homologation Json?
  mold              String
  code_mold         String
  product_code      String
  version           Int
  fitId             Int
  statusId          Int
  fit               Fit    @relation(fields: [fitId], references: [id], onDelete: Cascade)
  status            Status @relation(fields: [statusId], references: [id])

  @@index([fitId], map: "Homologation_fitId_fkey")
  @@index([statusId], map: "Homologation_statusId_fkey")
}

model Status {
  id           Int            @id @default(autoincrement())
  status       String
  Homologation Homologation[]
}
